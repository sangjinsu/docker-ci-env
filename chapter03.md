# 직접 도커 이미지 생성하기

### 도커 이미지를 생성하는 순서

- 도커 이미지는 컨테이너를 만드는 데 필요한 설정이나 종속성을 가진 소프트웨어 패키지입니다.
- 도커 이미지를 이용해 도커 컨테이너를 생성할 수 있습니다
- 도커 허브에 올려둔 도커 이미지를 내려받아 이용할 수 있고 직접 도커 이미지를 만들어 사용할 수 있다
- 직접 만든 이미지를 도커 허브에 업로드할 수도 있다

#### 순서

1. Dockerfile 이라는 파일을 작성한다

   도커 파일이란 도커 이미지를 만들기 위한 설정 파일이다

   컨테이너가 어떻게 행동해야 하는지에 대한 설정을 정의한다

2. 도커 파일에 입력한 명령들이 도커 클라이언트에 전달된다

3. 도커 클라이언트에 전달된 명령들을 도커 서버에서 처리해 도커 이미지를 만들어 준다

### 도커 파일 만들기

#### 도커 파일이란

- 도커 이미지를 만들기 위한 설정 파일이며 컨테이너가 어떻게 행동해야 하는지에 대한 설정을 정의한 것이다

#### 도커 파일 작성 방법

1. 베이스 이미지를 명시합니다 (파일 스냅샷)
2. 추가적으로 필요한 파일을 다운 받기 위한 명령어 명시
3. 컨테이너 시작시 실행될 명령어 명시

#### 베이스 이미지란 무엇인가

- 도커 이미지는 여러 레이어로 되어 있다
- 베이스 이미지는 이 이미지의 기반이다
- OS 라고 생각하면 된다

```dockerfile
FROM baseImage

RUN command

CMD ["executable"]
```

##### FROM

- 이미지 생성시 기반이 되는 이미지 레이어 명시
- 이미지이름:태그 형식으로 작성
- 태그를 붙이지 않으면 자동으로 가장 최신 버전으로 내려받는다 

##### RUN

- 도커 이미지가 생성되기 전에 숭행할 shell 명렁어

##### CMD

- 컨테이너가 시작됐을 때 실행할 실행 파일이나 shell 스크립트
- 도커 파일 안에서 한 번만 쓸 수 있다 



#### 도커 파일 -> 도커 클라이언트 -> 도커 서버 -> 이미지



#### build 명령어

- 해당 디렉터리에서 Dockerfile이라는 파일을 찾아서 도커 클라이언트에 전달합니다.

  

### 도커 이미지에 이름 붙여주기 docker build -t

- 도커 이미지에 이름을 붙이려면 -t 태그를 이용한다 
-  tag 약자이고 
- `저장소/프로젝트 이름 : 버전`
- `docker build -t sangjinsu/hello:latest .`
